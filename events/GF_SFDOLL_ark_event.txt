namespace = sfdoll_ark_event
#id标准写法为namespace的值加上编号

# 塔露拉通讯界面
country_event = {
	id = sfdoll_ark_event.1
	title = "sfdoll_ark_event.1"
	desc = "sfdoll_ark_event.1.desc.a"
	desc = "sfdoll_ark_event.1.desc.b"
	desc = "sfdoll_ark_event.1.desc.c"
	desc = "sfdoll_ark_event.1.desc.d"
	desc = {  text = "sfdoll_ark_event.1.desc.e"  trigger = {  has_country_flag = sfdoll_dingyi_owner  } }
	is_triggered_only = yes
	trigger = { has_authority = auth_gf_sfdoll }
	diplomatic = yes
	picture_event_data = {
		portrait = GFX_sfdoll_talulah
		room = this
		graphical_culture = this
		planet_background = this
		city_level = this
	}

	# 塔露拉担任总督
	option = {
		name = "sfdoll_ark_event.1.a"
		response_text = "sfdoll_ark_event.1.a.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_talulah
					event_target:sfdoll_leader_talulah = {
						leader_class = governor
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_talulah }
				event_target:sfdoll_leader_talulah = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = governor
				species = owner_species
				name = "Name_sfdoll_talulah"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {
					trait = leader_trait_sfdoll_talulah_governor
					trait = leader_trait_righteous
				}
				effect = {
					change_leader_portrait = GFX_sfdoll_talulah
					set_leader_flag = sfdoll_leader_talulah
					save_global_event_target_as = sfdoll_leader_talulah
				}
			}
		}
	}

	# 塔露拉担任科学家
	option = {
		name = "sfdoll_ark_event.1.b"
		response_text = "sfdoll_ark_event.1.b.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_talulah
					event_target:sfdoll_leader_talulah = {
						leader_class = scientist
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_talulah }
				event_target:sfdoll_leader_talulah = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = scientist
				species = owner_species
				name = "Name_sfdoll_talulah"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {  trait = leader_trait_sfdoll_talulah_scientist  }
				effect = {
					change_leader_portrait = GFX_sfdoll_talulah
					set_leader_flag = sfdoll_leader_talulah
					save_global_event_target_as = sfdoll_leader_talulah
				}
			}
		}
	}

	# 塔露拉担任舰队司令
	option = {
		name = "sfdoll_ark_event.1.c"
		response_text = "sfdoll_ark_event.1.c.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_talulah
					event_target:sfdoll_leader_talulah = {
						leader_class = admiral
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_talulah }
				event_target:sfdoll_leader_talulah = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = admiral
				species = owner_species
				name = "Name_sfdoll_talulah"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {  trait = leader_trait_sfdoll_talulah_admiral  }
				effect = {
					change_leader_portrait = GFX_sfdoll_talulah
					set_leader_flag = sfdoll_leader_talulah
					save_global_event_target_as = sfdoll_leader_talulah
				}
			}
		}
	}
	# 塔露拉担任陆军将领
	option = {
		name = "sfdoll_ark_event.1.d"
		response_text = "sfdoll_ark_event.1.d.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_talulah
					event_target:sfdoll_leader_talulah = {
						leader_class = general
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_talulah }
				event_target:sfdoll_leader_talulah = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = general
				species = owner_species
				name = "Name_sfdoll_talulah"
				skill = 5
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {
					trait = leader_trait_sfdoll_talulah_general
					trait = leader_trait_restrained
					trait = leader_trait_charismatic
					trait = leader_trait_glory_seeker
				}
				effect = {
					change_leader_portrait = GFX_sfdoll_talulah
					set_leader_flag = sfdoll_leader_talulah
					save_global_event_target_as = sfdoll_leader_talulah
				}
			}
		}
	}

	option = { name =  "EXIT" hidden_effect = { country_event = { id = sfdoll_elisa_event.3 } } }
}
# 塔露拉初次通讯
country_event = {
	id = sfdoll_ark_event.2
	base = sfdoll_ark_event.1
	desc_clear = yes
	desc = sfdoll_ark_event.2.desc
}

# 霜星通讯界面
country_event = {
	id = sfdoll_ark_event.3
	title = "sfdoll_ark_event.3"
	desc = "sfdoll_ark_event.3.desc.a"
	desc = "sfdoll_ark_event.3.desc.b"
	desc = "sfdoll_ark_event.3.desc.c"
	desc = "sfdoll_ark_event.3.desc.d"
	is_triggered_only = yes
	trigger = { has_authority = auth_gf_sfdoll }
	diplomatic = yes
	picture_event_data = {
		portrait = GFX_sfdoll_Frostnova
		room = this
		graphical_culture = this
		planet_background = this
		city_level = this
	}

	# 霜星担任总督
	option = {
		name = "sfdoll_ark_event.3.a"
		response_text = "sfdoll_ark_event.3.a.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_frostnova
					event_target:sfdoll_leader_frostnova = {
						leader_class = governor
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_frostnova }
				event_target:sfdoll_leader_frostnova = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = governor
				species = owner_species
				name = "Name_sfdoll_Frostnova"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {
					trait = leader_trait_sfdoll_frostnova_governor
					trait = leader_trait_righteous
				}
				effect = {
					change_leader_portrait = GFX_sfdoll_Frostnova
					set_leader_flag = sfdoll_leader_frostnova
					save_global_event_target_as = sfdoll_leader_frostnova
				}
			}
		}
	}

	# 霜星担任科学家
	option = {
		name = "sfdoll_ark_event.3.b"
		response_text = "sfdoll_ark_event.3.b.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_frostnova
					event_target:sfdoll_leader_frostnova = {
						leader_class = scientist
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_frostnova }
				event_target:sfdoll_leader_frostnova = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = scientist
				species = owner_species
				name = "Name_sfdoll_Frostnova"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {  trait = leader_trait_sfdoll_frostnova_scientist  }
				effect = {
					change_leader_portrait = GFX_sfdoll_Frostnova
					set_leader_flag = sfdoll_leader_frostnova
					save_global_event_target_as = sfdoll_leader_frostnova
				}
			}
		}
	}

	# 霜星担任舰队司令
	option = {
		name = "sfdoll_ark_event.3.c"
		response_text = "sfdoll_ark_event.3.c.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_frostnova
					event_target:sfdoll_leader_frostnova = {
						leader_class = admiral
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_frostnova }
				event_target:sfdoll_leader_frostnova = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = admiral
				species = owner_species
				name = "Name_sfdoll_Frostnova"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {  trait = leader_trait_sfdoll_frostnova_admiral  }
				effect = {
					change_leader_portrait = GFX_sfdoll_Frostnova
					set_leader_flag = sfdoll_leader_frostnova
					save_global_event_target_as = sfdoll_leader_frostnova
				}
			}
		}
	}

	# 霜星担任陆军将领
	option = {
		name = "sfdoll_ark_event.3.d"
		response_text = "sfdoll_ark_event.3.d.response"
		allow = {
			custom_tooltip = {
				fail_text = "sfdoll_the_leader_is_doing_this_job"
				NAND = {
					exists = event_target:sfdoll_leader_frostnova
					event_target:sfdoll_leader_frostnova = {
						leader_class = general
						owner = { is_same_value = root }
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = event_target:sfdoll_leader_frostnova }
				event_target:sfdoll_leader_frostnova = { kill_leader = { show_notification = no fire = yes } }
			}
			create_leader = {
				class = general
				species = owner_species
				name = "Name_sfdoll_Frostnova"
				skill = 1
				set_age = 20
				immortal = yes
				event_leader = yes	# prevents this leader from leading factions and winning elections
				traits = {
					trait = leader_trait_sfdoll_frostnova_general
					trait = leader_trait_restrained
					trait = leader_trait_charismatic
					trait = leader_trait_glory_seeker
				}
				effect = {
					change_leader_portrait = GFX_sfdoll_Frostnova
					set_leader_flag = sfdoll_leader_frostnova
					save_global_event_target_as = sfdoll_leader_frostnova
				}
			}
		}
	}

	option = { name =  "EXIT" hidden_effect = { country_event = { id = sfdoll_elisa_event.3 } } }
}
# 霜星第一次通讯
country_event = {
	id = sfdoll_ark_event.4
	base = sfdoll_ark_event.3
	desc_clear = yes
	desc = sfdoll_ark_event.4.desc
}

# 粥事件开始
country_event = {
	id = sfdoll_ark_event.5
	title = "sfdoll_ark_event.5"
	desc = "sfdoll_ark_event.5.desc"
	hide_window = no
	is_triggered_only = yes
	picture = "GFX_evt_mysterious_signal"
	trigger = {	has_authority = auth_gf_sfdoll	}
	immediate = {
		# 刷诺耶露旁边
		event_target:planet_sfdoll_embers_gloomy_1 = {
			solar_system = {
				spawn_system = {
					initializer = sfdoll_system_ark
					hyperlane = no
					is_discovered = no
					min_distance >= 25
					max_distance <= 35
					effect = {
						set_surveyed = {  surveyed = yes  }
						add_hyperlane = {
							from = THIS
							to = PREV
						}
					}
				}
			}
		}
	}
}
# 星球项目完成
country_event = {
	id = sfdoll_ark_event.7
	title = "sfdoll_ark_event.7"
	desc = "sfdoll_ark_event.7.desc"
	hide_window = no
	is_triggered_only = yes
	location = event_target:sfdoll_ark_planet
	picture = "GFX_evt_relic_world_building"
	trigger = { has_authority = auth_gf_sfdoll }
	immediate = { country_event = {  id = sfdoll_ark_event.8  days = 1080  } }
	option = {
		name = "DISTURBING"
		add_resource = { society_research = 10000 }
		event_target:sfdoll_ark_planet = { add_deposit = d_society_8 }
	}
}

# 角色加入
country_event = {
	id = sfdoll_ark_event.8
	title = "sfdoll_ark_event.8"
	desc = "sfdoll_ark_event.8.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = GFX_sfdoll_elisa
		room = this
		graphical_culture = this
		planet_background = this
		city_level = this
	}	
	is_triggered_only = yes
	immediate = {
		set_country_flag = sfdoll_talulah_owner
		set_country_flag = sfdoll_frostnova_owner
		set_country_flag = sfdoll_talulah_not_know
		set_country_flag = sfdoll_frostnova_not_know
	}
	option = {  name = "REMARKABLE"  break = yes  }
}